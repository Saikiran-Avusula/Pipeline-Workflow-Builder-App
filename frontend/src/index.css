/* ==========================================================================
   Pipeline Builder - Bootstrap-Inspired Styles
   ==========================================================================
   
   This stylesheet implements a Bootstrap-inspired design system for the 
   Pipeline Builder application. It follows Bootstrap's visual language with:
   - Consistent color palette using CSS custom properties
   - Inter font family for clean, modern typography
   - Card-based components with subtle shadows
   - Dark theme matching Bootstrap's dark mode
   ========================================================================== */


/* --------------------------------------------------------------------------
   CSS Custom Properties (Design Tokens)
   --------------------------------------------------------------------------
   These variables define our Bootstrap-inspired color palette and spacing.
   Change these values to quickly theme the entire application.
   -------------------------------------------------------------------------- */

:root {
  /* Primary Bootstrap colors */
  --bs-primary: #0d6efd;
  --bs-primary-hover: #0b5ed7;
  --bs-primary-active: #0a58ca;
  
  /* Semantic colors for different states */
  --bs-success: #198754;
  --bs-danger: #dc3545;
  --bs-danger-hover: #bb2d3b;
  --bs-warning: #ffc107;
  --bs-info: #0dcaf0;
  
  /* Dark theme background colors - matches Bootstrap dark mode */
  --bs-dark: #212529;
  --bs-dark-rgb: 33, 37, 41;
  --bs-body-bg: #1a1d21;
  --bs-card-bg: #2b3035;
  --bs-input-bg: #1e2125;
  --bs-border-color: #495057;
  
  /* Text colors for dark theme */
  --bs-body-color: #e9ecef;
  --bs-secondary-color: #adb5bd;
  --bs-muted-color: #6c757d;
  
  /* Shadows for depth and hierarchy */
  --bs-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  --bs-box-shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  --bs-box-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
  
  /* Border radius - Bootstrap defaults */
  --bs-border-radius: 0.375rem;
  --bs-border-radius-sm: 0.25rem;
  --bs-border-radius-lg: 0.5rem;
  
  /* Transitions for smooth interactions */
  --bs-transition: all 0.15s ease-in-out;
}


/* --------------------------------------------------------------------------
   Base Styles & Reset
   --------------------------------------------------------------------------
   Global styles applied to the entire application.
   -------------------------------------------------------------------------- */

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
               'Helvetica Neue', Arial, sans-serif;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.5;
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}


/* --------------------------------------------------------------------------
   Application Layout
   --------------------------------------------------------------------------
   Main container structure using flexbox for the app, toolbar, canvas, 
   and footer sections.
   -------------------------------------------------------------------------- */

.app {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

/* Header / Navbar styles - Bootstrap navbar aesthetic */
.app-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(180deg, #2d3338 0%, var(--bs-dark) 100%);
  border-bottom: 1px solid var(--bs-border-color);
  box-shadow: var(--bs-box-shadow-sm);
}

.app-brand {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--bs-body-color);
  text-decoration: none;
}

.app-brand i {
  color: var(--bs-primary);
  font-size: 1.5rem;
}


/* --------------------------------------------------------------------------
   Toolbar Styles
   --------------------------------------------------------------------------
   The toolbar contains draggable node components. Styled as a Bootstrap 
   card with a subtle background.
   -------------------------------------------------------------------------- */

.toolbar {
  background-color: var(--bs-card-bg);
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--bs-border-color);
}

.toolbar-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--bs-secondary-color);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.toolbar-title i {
  font-size: 1rem;
}

.toolbar-nodes {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}


/* --------------------------------------------------------------------------
   Draggable Node Styles (Toolbar Items)
   --------------------------------------------------------------------------
   These are the node buttons in the toolbar that users drag onto the canvas.
   Styled as Bootstrap buttons with icons.
   -------------------------------------------------------------------------- */

.draggable-node {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 100px;
  padding: 0.5rem 1rem;
  font-size: 0.8125rem;
  font-weight: 500;
  color: #fff;
  background: linear-gradient(180deg, var(--bs-primary) 0%, var(--bs-primary-hover) 100%);
  border: 1px solid var(--bs-primary-active);
  border-radius: var(--bs-border-radius);
  cursor: grab;
  user-select: none;
  transition: var(--bs-transition);
  box-shadow: var(--bs-box-shadow-sm);
}

.draggable-node:hover {
  background: linear-gradient(180deg, var(--bs-primary-hover) 0%, var(--bs-primary-active) 100%);
  transform: translateY(-2px);
  box-shadow: var(--bs-box-shadow);
}

.draggable-node:active {
  cursor: grabbing;
  transform: translateY(0);
}

.draggable-node i {
  font-size: 1rem;
}


/* --------------------------------------------------------------------------
   Canvas Styles
   --------------------------------------------------------------------------
   The main React Flow canvas area where nodes are placed and connected.
   -------------------------------------------------------------------------- */

.canvas {
  flex: 1;
  background-color: var(--bs-body-bg);
  /* Subtle dot grid pattern like Bootstrap's background patterns */
  background-image: radial-gradient(circle, var(--bs-border-color) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* React Flow customizations to match Bootstrap theme */
.react-flow__background {
  background-color: var(--bs-body-bg) !important;
}

.react-flow__minimap {
  background-color: var(--bs-card-bg) !important;
  border: 1px solid var(--bs-border-color) !important;
  border-radius: var(--bs-border-radius) !important;
}

.react-flow__controls {
  box-shadow: var(--bs-box-shadow) !important;
  border-radius: var(--bs-border-radius) !important;
  overflow: hidden;
}

.react-flow__controls-button {
  background-color: var(--bs-card-bg) !important;
  border-bottom: 1px solid var(--bs-border-color) !important;
  fill: var(--bs-body-color) !important;
}

.react-flow__controls-button:hover {
  background-color: var(--bs-dark) !important;
}


/* --------------------------------------------------------------------------
   Footer / Submit Section Styles
   --------------------------------------------------------------------------
   The footer area containing the submit button.
   -------------------------------------------------------------------------- */

.app-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem 1.5rem;
  background-color: var(--bs-card-bg);
  border-top: 1px solid var(--bs-border-color);
}


/* --------------------------------------------------------------------------
   Button Styles
   --------------------------------------------------------------------------
   Bootstrap-inspired button styles with variants for primary, danger, etc.
   -------------------------------------------------------------------------- */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  font-family: inherit;
  font-size: 0.9375rem;
  font-weight: 500;
  line-height: 1.5;
  text-align: center;
  text-decoration: none;
  white-space: nowrap;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  border: 1px solid transparent;
  border-radius: var(--bs-border-radius);
  transition: var(--bs-transition);
}

.btn-primary {
  color: #fff;
  background: linear-gradient(180deg, var(--bs-primary) 0%, var(--bs-primary-hover) 100%);
  border-color: var(--bs-primary-active);
  box-shadow: var(--bs-box-shadow-sm);
}

.btn-primary:hover {
  background: linear-gradient(180deg, var(--bs-primary-hover) 0%, var(--bs-primary-active) 100%);
  border-color: var(--bs-primary-active);
  box-shadow: var(--bs-box-shadow);
}

.btn-primary:active {
  background: var(--bs-primary-active);
}

/* Legacy submit button class for backwards compatibility */
.submit-button {
  background: linear-gradient(180deg, var(--bs-primary) 0%, var(--bs-primary-hover) 100%);
  color: white;
  border: 1px solid var(--bs-primary-active);
  padding: 0.625rem 1.5rem;
  border-radius: var(--bs-border-radius);
  cursor: pointer;
  font-family: inherit;
  font-size: 0.9375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  transition: var(--bs-transition);
  box-shadow: var(--bs-box-shadow-sm);
}

.submit-button:hover {
  background: linear-gradient(180deg, var(--bs-primary-hover) 0%, var(--bs-primary-active) 100%);
  box-shadow: var(--bs-box-shadow);
  transform: translateY(-1px);
}

.submit-button:active {
  transform: translateY(0);
}

.btn-danger-sm {
  padding: 0;
  width: 20px;
  height: 20px;
  font-size: 14px;
  line-height: 1;
  color: #fff;
  background-color: var(--bs-danger);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  transition: var(--bs-transition);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-danger-sm:hover {
  background-color: var(--bs-danger-hover);
  transform: scale(1.1);
}


/* --------------------------------------------------------------------------
   Node Card Styles (Canvas Nodes)
   --------------------------------------------------------------------------
   These styles apply to the BaseNode component and all node variants.
   Following Bootstrap's card component pattern.
   -------------------------------------------------------------------------- */

.node-card {
  min-width: 220px;
  background-color: var(--bs-card-bg);
  border: 1px solid var(--bs-border-color);
  border-radius: var(--bs-border-radius-lg);
  box-shadow: var(--bs-box-shadow);
  font-family: 'Inter', sans-serif;
  transition: var(--bs-transition);
}

.node-card:hover {
  box-shadow: var(--bs-box-shadow-lg);
  border-color: var(--bs-primary);
}

.node-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.625rem 0.75rem;
  background: linear-gradient(180deg, rgba(13, 110, 253, 0.15) 0%, rgba(13, 110, 253, 0.05) 100%);
  border-bottom: 1px solid var(--bs-border-color);
  border-radius: var(--bs-border-radius-lg) var(--bs-border-radius-lg) 0 0;
}

.node-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--bs-body-color);
}

.node-title i {
  color: var(--bs-primary);
  font-size: 1rem;
}

.node-body {
  padding: 0.75rem;
}

.node-divider {
  border: none;
  height: 1px;
  background-color: var(--bs-border-color);
  margin: 0.5rem 0;
}


/* --------------------------------------------------------------------------
   Form Control Styles (Inside Nodes)
   --------------------------------------------------------------------------
   Bootstrap-inspired form controls for inputs, selects, and textareas
   used within the node components.
   -------------------------------------------------------------------------- */

.form-group {
  margin-bottom: 0.625rem;
}

.form-group:last-child {
  margin-bottom: 0;
}

.form-label {
  display: block;
  margin-bottom: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--bs-secondary-color);
}

.form-control {
  display: block;
  width: 100%;
  padding: 0.375rem 0.625rem;
  font-family: inherit;
  font-size: 0.8125rem;
  font-weight: 400;
  line-height: 1.5;
  color: var(--bs-body-color);
  background-color: var(--bs-input-bg);
  background-clip: padding-box;
  border: 1px solid var(--bs-border-color);
  border-radius: var(--bs-border-radius-sm);
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:focus {
  border-color: var(--bs-primary);
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.form-control::placeholder {
  color: var(--bs-muted-color);
  opacity: 1;
}

/* Select dropdown styling */
.form-select {
  display: block;
  width: 100%;
  padding: 0.375rem 2rem 0.375rem 0.625rem;
  font-family: inherit;
  font-size: 0.8125rem;
  font-weight: 400;
  line-height: 1.5;
  color: var(--bs-body-color);
  background-color: var(--bs-input-bg);
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23adb5bd' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;
  background-size: 12px 9px;
  border: 1px solid var(--bs-border-color);
  border-radius: var(--bs-border-radius-sm);
  appearance: none;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-select:focus {
  border-color: var(--bs-primary);
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* Textarea styling */
.form-textarea {
  display: block;
  width: 100%;
  min-height: 60px;
  padding: 0.375rem 0.625rem;
  font-family: inherit;
  font-size: 0.8125rem;
  font-weight: 400;
  line-height: 1.5;
  color: var(--bs-body-color);
  background-color: var(--bs-input-bg);
  border: 1px solid var(--bs-border-color);
  border-radius: var(--bs-border-radius-sm);
  resize: none;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-textarea:focus {
  border-color: var(--bs-primary);
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}


/* --------------------------------------------------------------------------
   Badge Styles
   --------------------------------------------------------------------------
   Small badges for displaying status, variables, or results in nodes.
   -------------------------------------------------------------------------- */

.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.5rem;
  font-size: 0.6875rem;
  font-weight: 600;
  line-height: 1;
  text-align: center;
  white-space: nowrap;
  vertical-align: baseline;
  border-radius: var(--bs-border-radius-sm);
}

.badge-primary {
  color: #fff;
  background-color: var(--bs-primary);
}

.badge-success {
  color: #fff;
  background-color: var(--bs-success);
}

.badge-info {
  color: #000;
  background-color: var(--bs-info);
}

.badge-secondary {
  color: #fff;
  background-color: var(--bs-muted-color);
}


/* --------------------------------------------------------------------------
   Handle (Connector) Styles
   --------------------------------------------------------------------------
   Styles for the connection handles on nodes. These are the circles that
   users click to create edges between nodes.
   -------------------------------------------------------------------------- */

.node-handle {
  width: 12px !important;
  height: 12px !important;
  background-color: var(--bs-primary) !important;
  border: 2px solid var(--bs-body-color) !important;
  border-radius: 50% !important;
  transition: var(--bs-transition);
}

.node-handle:hover {
  background-color: var(--bs-primary-hover) !important;
  transform: scale(1.2);
}


/* --------------------------------------------------------------------------
   Utility Classes
   --------------------------------------------------------------------------
   Helper classes for common styling needs.
   -------------------------------------------------------------------------- */

.text-center {
  text-align: center;
}

.text-muted {
  color: var(--bs-muted-color) !important;
}

.text-primary {
  color: var(--bs-primary) !important;
}

.mt-1 {
  margin-top: 0.25rem;
}

.mt-2 {
  margin-top: 0.5rem;
}

.mb-1 {
  margin-bottom: 0.25rem;
}

.mb-2 {
  margin-bottom: 0.5rem;
}

.gap-1 {
  gap: 0.25rem;
}

.gap-2 {
  gap: 0.5rem;
}